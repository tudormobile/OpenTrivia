<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:models="clr-namespace:Tudormobile.OpenTrivia.UI.ViewModels"
                    xmlns:converters="clr-namespace:Tudormobile.OpenTrivia.UI.Converters"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Merge dependencies for design-time support -->
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Colors.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <!-- Converters -->
    <converters:BooleanConverter x:Key="BooleanConverter" TrueValue="Visible" FalseValue="Hidden" />
    <converters:IndexToLetterConverter x:Key="IndexToLetterConverter" />
    <converters:CategoryToGlyphConverter x:Key="CategoryToGlyphConverter" />

    <!-- DataTemplates for displaying a trivia questions -->
    <DataTemplate x:Key="OpenTrivia.UI.QuestionTemplate" DataType="{x:Type models:SelectableQuestion}">
        <TextBlock TextWrapping="Wrap">
            <Run Text="{Binding QuestionNumber, StringFormat='{}Question {0}. ', Mode=OneTime}" />
            <Run Text="{Binding Question, Mode=OneTime}" FontWeight="SemiBold" />
            <Run Text="{Binding Difficulty, StringFormat='{} [ {0} ]', Mode=OneTime}" FontStyle="Italic" />
        </TextBlock>
    </DataTemplate>

    <DataTemplate x:Key="OpenTrivia.UI.AnswersTemplate" DataType="{x:Type models:SelectableQuestion}">
        <ItemsControl ItemsSource="{Binding AllAnswers}" AlternationCount="{Binding AllAnswers.Count}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <!-- Access the index using AlternationIndex -->
                        <TextBlock Text="{Binding Path=(ItemsControl.AlternationIndex), 
                            Converter={StaticResource IndexToLetterConverter},
                                                 RelativeSource={RelativeSource TemplatedParent},
                                                 StringFormat='{}{0}. '}" 
                                   FontWeight="SemiBold"/>
                        <TextBlock Text="{Binding}" TextWrapping="Wrap"/>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </DataTemplate>

    <!-- Composite template combining question and answers -->
    <DataTemplate x:Key="OpenTrivia.UI.QuestionWithAnswersTemplate" DataType="{x:Type models:SelectableQuestion}">
        <StackPanel>
            <!-- Reuse the question template -->
            <ContentControl Content="{Binding}" 
                           ContentTemplate="{StaticResource OpenTrivia.UI.QuestionTemplate}"
                           Focusable="False"
                           Margin="0,0,0,10"/>

            <!-- Reuse the answers template -->
            <ContentControl Content="{Binding}" 
                           ContentTemplate="{StaticResource OpenTrivia.UI.AnswersTemplate}"
                           Focusable="False"/>
        </StackPanel>
    </DataTemplate>

    <!-- DataTemplate for displaying a trivia category -->
    <DataTemplate x:Key="OpenTrivia.UI.CategoryTemplate" DataType="{x:Type models:SelectableCategory}">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="&#xe970;" FontFamily="Segoe Fluent Icons" VerticalAlignment="Center"
                       Visibility="{Binding IsSelected, Converter={StaticResource BooleanConverter}, FallbackValue=Hidden}"/>
            <TextBlock FontFamily="Segoe Fluent Icons" VerticalAlignment="Center"
                       Text="{Binding Id, Converter={StaticResource CategoryToGlyphConverter}, FallbackValue=&#xe9ce;}"/>
            <TextBlock Text="{Binding Name, Mode=Default}" />
        </StackPanel>
    </DataTemplate>

</ResourceDictionary>